# Автоматизированное кафе

В кафе есть запасы ингредиентов на складе. Нужно:
- Для каждого **Заказа** (например, посетитель попросил Лазанью и Морковный сок) корректировать количество оставшихся ингредиентов и сформировать **Поставку**, если их осталось мало.
- Вывести все ингредиенты из созданных **Поставок**, отсортировав ингредиенты по суммарному количеству.

Сценарий работы следующий:
1. Клиент делает **Заказ** в нашем кафе.
2. Повар оценивает количество ингредиентов, которое понадобится, и описывает **Заказ** в виде запроса в нашу систему.
3. Система обрабатывает **Заказ**.

## Обработка Заказа

### Ингредиентов хватает
- Ингредиенты из **Заказа** списываются из оставшихся на складе.
- **Заказ** сохраняется в историю.
- Запускается **Расчёт Поставки** ингредиентов.

#### Расчёт Поставки

Система находит среднее количество использования ингредиентов за последние 10 дней.
Если текущего количества ингредиентов не хватит на 4 дня среднего использования, то система создаёт **Поставку** и добавляет туда количество ингредиентов на 7 дней.

Однако, **Поставка** оформляется не сразу, так как нерационально поставлять условные 10 яблок — система накапливает необходимые ингредиенты в течении 2-х дней.

#### Оформление Поставки
Если суммарное количество ингредиентов в неоформленных поставках > 100, то система оформляет **Поставку** и помечает её оформленной.
Если ингредиентов не хватает, то **Поставка** оформляется сразу.

### Ингредиентов не хватает
- Отвечаем на Запрос ошибкой.
- **Оформляется Поставка** для недостающих ингредиентов, учитывая при расчёте количество из **Заказа**.

Для **Заказа** может потребоваться ингредиент, которого никогда не было на складе.
По таким ингредиентам нужно оформлять **Поставку** с количеством из запроса * 5.

Структура ингредиентов на складе:

``Название | Количество ингредиентов``

Заказ:

``Список ингредиентов (название-количество)``

Закупка ингредиентов:

``Список ингредиентов (название-количество) | Оформлена ли``